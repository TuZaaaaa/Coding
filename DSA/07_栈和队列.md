# 栈和队列
> 栈和队列是限定插入和删除只能在表的"端点"进行的**线性表**

## 应用
### 栈的应用
> 栈的操作具有**后进先出**的固有特性
> 如果问题求解的过程具有**后进先出**的天然特性的话，
> 则求解的算法中也必然需要利用“栈”

应用场景：
- 数制转换
- 表达式求值
- 括号匹配的检验
- 八皇后问题
- 行编辑程序
- 函数调用
- 迷宫求解
- 递归调用的实现

### 队列的应用
> 队列的操作具有**先进先出**的特性
> 适合解决**排队问题**

应用场景：
- 脱机打印输出：按申请的先后顺序依次输出
- 多用户系统中，多个用户排成队，分时地循环使用 CPU 和内存
- 按用户的优先级排成多个队，每个优先级一个队列
- 实时控制系统中，信号按接收的先后顺序依次处理
- 网络电文传输，按到达的时间先后顺序依次进行

## 定义和特点
### 栈的定义和特点
> 栈（stack）是一个特殊的线性表，是限定仅在一端（通常是表尾）进行插入和删除操作的线性表
> 又称为**后进先出**（Last In First Out）的线性表，简称 **LIFO** 结构

#### 栈的相关概念
> 栈是仅在表尾进行插入、删除操作的线性表
- 表尾（即 $a_n$ 端）称为**栈顶** Top
- 表头（即 $a_1$ 端）称为**栈底** Base/Bottom
- 插入元素到**栈顶**（即表尾）的操作，称为**入栈**
- 从**栈顶**（即表尾）删除最后一个元素的操作，称为**出栈**

- “入" = 压入 = PUSH（x）
- “出" = 弹出 = POP（y）

> 栈与一般线性表有什么不同
> **仅在于运算规则不同**

| | 一般线性表 | 栈 |
| --- | --- | --- |
| 逻辑结构 | 一对一 | 一对一 |
| 存储结构 | 顺序表、链表 | 顺序栈、链栈 |
| 运算规则 | 随机存取 | 后进后出（LIFO）

### 队列的定义和特点
> 队列(queue)是一种**先进先出**（First In First Out-**FIFO**）的线性表
> 在表一端插入（表尾），在另一端（表头）删除

## 案例引入

### 进制转换
> 十进制整数 N 向其它进制数 d （二、八、十六）的转换是计算机实现计算的基本问题
> 转换法则：除以 d 倒取余
> 该转换法则对应一个简单算法原理：
> n = (n div d) * d + n mod d
> 其中 div 为整除运算，mod 为求余运算

例：将十进制数 159 转换称八进制数
159 / 8 余 7
19 / 8 余 3
2 / 8 余 2

> 每次求余之后压栈，当全部求余运算结束之后，依次弹栈

### 括号匹配的检验
> 假设表达式中允许包含两种括号：圆括号和方括号
嵌套的顺序随意，即：
- ( [] () ) 或 [ ( [] [] )] 为正确格式
- ( ( ] ) 为错误格式
- ( [ () ) 或 ( () ] )) 为错误格式

方法：
- 可以利用一个栈结构保存每个出现的左括号，当遇到右括号时，
  - 从栈中弹出左括号，检验匹配情况
- 在检验过程中，若遇到以下几种情况之一，便可以得出括号不匹配的情况
  1. 当遇到某一个右括号时，栈已空，说明到目前为止，**右括号多于左括号**
  2. 从栈中弹出的左括号与当前检验的右括号类型不同，说明了**括号交叉**的情况
  3. 算术表达式输入完毕，但栈中还有没有匹配的左括号，说明**左括号多余右括号** 

### 表达式求值
> 表达式求值时程序设计语言编译中的一个最基本的问题，它的实现也需要运用栈
> 这里介绍的是由运算符优先级确定运算顺序的对表达式求值算法 > **算符优先算法**

表达式的组成
- 操作数：operand 常数、变量
- 运算符：operator 算术运算符、关系运算符和逻辑运算符
- 界限符：delimiter 左右括弧和表达式起始、结束符
> 任何一个**算术表达式**由**操作数**（常数、变量）、**算术运算符**（+, -, *, /）和**界限符**（括号、表达式结束符 '#'、虚设的表达式起始符 '#'）组成，后两者统称为算符

算法实现：
为了实现表达式求值，需要设置两个栈：
- 算符栈 OPTR，用于寄存运算符
- 操作数栈 OPND，用于寄存运算数和运算结果
求值的处理过程是自左至右扫描表达式的每一个字符
- 当扫描的是**运算数**，则将其压入栈 OPND
- 当扫描的是**运算符**时
  - 若此运算符比 OPTR 栈顶运算符的优先级高，则入栈 OPTR，继续向后处理
  - 若此运算符比 OPTR 栈顶运算符的优先级低，则从 OPND 栈中弹出两个运算数，从 OPTR 中弹出栈顶运算符进行运算，并将运算结果压入栈 OPND
- 继续处理当前字符，直到遇到结束符为止

### 舞伴问题
假设在舞会上，男士和女士各自排成一队，舞会开始时，依次从男队和女队的队头各出一人配成舞伴。如果两队初始人数不相同，则较长的那一队中未配对者等待下一轮舞曲，现要求写一算法模拟上述舞伴配对问题
> 显然，先入队的男士或女士先出队配成舞伴，因此该问题具有典型的先进先出特性，可以用队列作为算法的数据结构
- 首先构造两个队列
- 依次将队头元素出队配成舞伴
- 某队为空，则另外一队等待着则是下一舞曲第一个可获得舞伴的人
