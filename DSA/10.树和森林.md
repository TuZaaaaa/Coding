# 树和森林

## 树的存储结构

### 双亲表示法

**实现：**
定义结构数组，存放树的结点，每个结点包含两个域
- 数据域：存放结点本身信息
- 双亲域：指示本结点的双亲结点在数组中的位置

**特点：**
> 找双亲容器，找孩子难

**结构类型：**
```c
// 结点结构
typedef struct PTNode {
    TElemType data;
    int parent; // 双亲位置域
} PTNode;

// 树结构
#define MAX_TREE_SIZE 100

typedef struct {
    PTNode nodes[MAX_TREE_SIZE];
    int r, n; // 根结点的位置和结点个数
} PTree;
```

### 孩子链表
> 把每个结点的孩子结点排列起来，看成是一个线性表，用单链表存储
> 则 n 个结点有 n 个孩子链表（叶子的孩子链表为空表）
> 而 n 个头指针又组成一个线性表，用顺序表（含 n 个元素的结构数组）存储

**结构类型：**
```c
// 孩子结点结构
typedef struct CTNode {
    int child;
    struct CTNode *next;
} *ChildPtr;

// 双亲结点结构
typedef struct {
    TElemType data;
    ChildPtr firstchild; // 孩子链表头指针
} CTBox;

// 树结构
typedef struct {
    CTBox nodes[MAX_TREE_SIZE];
    int n, r; // 结点树和根结点的位置
} CTree;
```

**特点：**
> 找孩子容易，找双亲难

### 孩子兄弟表示法
> 也称二叉树表示法，二叉链表表示法

**实现：**
- 用二叉链表作树的存储结构，链表中每个结点的两个指针域分别指向
    - **第一个孩子结点**
    - **下一个兄弟结点**

**结构类型：**
```c
typedef struct CSNode {
    ElemType data;
    struct CSNode *firstchild, *nextsibling;
} CSNode, *CSTree;
```

## 树和二叉树的转换
- 将树转化为二叉树进行处理，利用二叉树的算法来实现对树的操作
- 由于树和二叉树都可以用二叉链表作存储结构，则**以二叉链表作媒介**可以导出树与二叉树之间的一个对应关系

### 树转换为二叉树

**操作步骤：**
1. 加线：在兄弟之间加一根线
2. 抹线：对每个结点，除了其左孩子外，去除其与其余孩子之间的关系
3. 旋转：以树的根结点为轴心，将整树顺时针转 $45 \circ$
   
> **兄弟相连留长子**

### 二叉树转换为树

**操作步骤：**
1. 加线：若 p 结点是双亲结点的左孩子，则将 p 的右孩子，右孩子的右孩子...沿分支找到的所有右孩子，都与 p 的双亲用线连起来
2. 抹线：抹掉原二叉树中双亲与右孩子之间的连线
3. 调整：将结点按层次排列，形成树结构

> **左孩右右连双亲，去掉原来右孩线**

## 森林和二叉树的转换

### 森林转换为二叉树

**操作步骤：**
1. 将各棵树分别转换为二叉树
2. 将每棵树的根结点用线相连
3. 将第一棵树根结点作为二叉树的根，再以根结点为轴心，顺时针旋转，构成二叉树

> **树变二叉根相连**

### 二叉树转换为森林

**操作步骤：**
1. 抹线：将二叉树中根结点与其右孩子连线，及沿右分支搜索到的所有右孩子间连线全部抹掉，使之变成孤立的二叉树
2. 还原：将孤立的二叉树还原成树

> **去掉全部右孩线，孤立二叉再还原**

### 树和森林的遍历

#### 树的遍历

- 先根（次序）遍历：
    - 若树不空，则先访问根结点，然后依次先根遍历各棵子树
- 后根（次序）遍历：
    - 若树不空，则先依次后根遍历各棵子树，然后访问根结点
- 层次遍历：
    - 若树不空，则自上而下自左至右访问树中的每个结点

#### 森林遍历

将森林看作有三部分构成：
1. 森林中第一棵树的根结点
2. 森林中第一棵树的子树森林
3. 森林中其它树构成的森林（递归思想）

##### 先序遍历

若森林不空，则
1. **访问森林中第一棵树的根结点**
2. **先序遍历**森林中第一棵树的子树森林
2. **先序遍历**森林中（除第一棵树外）其余树构成的森林

> 即：依次从左至右对森林中的每一棵树进行先根遍历

##### 中序遍历

若森林不空，则
1. **中序遍历**森林中第一棵树的子树森林
2. **访问森林中第一棵树的根结点**
3. **中序遍历**森林中（除第一棵树外）其余树构成的森林


