# CDN

## 视频
- 固定速度展示的图像序列
- 高码率，网络带宽需求大
- 经常压缩后传输
- 编码
  - 使用图像内或图像间的冗余来降低大小
  - 空间冗余（图像内）
  - 时间冗余（图像间）
- 流化服务
  - DASH(Dynamic, Adaptive Streaming over HTTP)
    - 服务器
      - 将视频文件分割为多个块
      - 每个块独立存储，编码于不同码率（8-10 种）
      - 告示文件（manifest file）：提供不同块的 URL
    - 客户端
      - 先获取告示文件
      - 周期性测量服务器到客户端的带宽
      - 查询告示文件，在一个时刻请求一个块，HTTP 头部指定字节范围
        - 如果带宽足够，选择最大码率的视频块
        - 会话中的不同时刻，可以切换请求不同的编码块（取决于当时的可用带宽）
  - 分块传输

### Content Distribution Network
- 挑战：上百万用户同时流化视频内容
  - 方案1：单个的，大的服务中心
    - 服务器->客户端路径上跳数过多，瓶颈链路的带宽小导致停顿
    - 网络同时充斥同个视频的拷贝，效率低
    - 单点故障
    - 周边网络的拥塞
    - 简单，但不易扩展
  - 方案2：CDN
    - 全网部署缓存节点
    - enter deep：深入到许多接入网
      - 更接近用户，数量多，管理困难
    - bring home：部署少数关键位置
      - 采用租用线路将服务器簇连接起来
      - Limelight
    - 用户从 CDN 中请求内容，重定向到最近的拷贝

