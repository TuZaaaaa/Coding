# DNS
- Domain Name System

## 必要性
- IP 不方便记忆、无意义

## 需要解决的问题
- 如何命名设备
- 如何完成 名字-IP地址 的转换
- 如何维护：增删域名，需要做哪些工作

## DNS 总体思路和目标
- 主要思路
  - 分层的、基于域的命名机制
  - 若干分布式的数据库完成转换
  - 运行再 udp 之上的服务（端口号 53）
  - 以应用层协议实现
- 主要目的
  - name/IP translate
  - 其他目的
    - 主机别名
    - 邮件服务器别名
    - 负载均衡

## Q1：Name Space
- 一个层面设备可以重名
- 层次树状
- 几百个顶级域名
  - 每个域下面划分若干子域
- 域与物理网络无关

## Q2: 解析问题
- 问题
  - 可靠性问题：单点故障
  - 扩展性问题：通信容量
  - 维护问题：远距离的集中式数据库
- 区域
  - 区域的划分由区域管理者自己决定
  - 每个区域都有一个名字服务器，维护着它的所管辖区域的权威信息
- 资源记录
  - 作用：维护映射关系
  - 位置：Name Server 的分布式数据库中
  - RR 格式
    - Domain name：域名
    - TTL：time to live 生存时间（权威，缓冲记录）
    - Class：对于 Internet，值为 IN
    - Value：可以是数字、域名或 ASCII 中
    - Type：资源记录的类型

## 工作流程
- 应用调用解析器
- 解析器作为客户，向 Name Server 发出查询报文（封装再 UDP 段中）
- Name Server 返回响应报文

## Local Name Server
- 每个 ISP 都有一个
- 主机发起 DNS 查询，首先送到此
- 具有缓存作用（若无，递归查询）
  - 递归查询 -> 迭代查询（Better）

## Q3：如何维护
- 注册域名