# 第一章习题

- ”主机“和”端系统“之间有什么不同？列举几种不同类型的端系统，Web 服务器是一种端系统吗？
  - 没有不同
  - Pc，服务器，手机
  - 是
- 拨号调制解调器、HFC，DSL 和 FTTH 都用于住宅接入，对于这些技术，给出每种技术的传输速率范围，并讨论它们的传输速率是共享的还是专用的
  - Modelm 56kbps 专用
  - HFC 下：42.8mbps 上：30.7mbps 专用
  - DSL 下：24mbps 上：2.5mbps 共享
  - FTTH 下：10-20mbps 上：2-10mbps 专用
- 假定在发送主机和接收主机之间只有一台分组交换机，发送主机和交换机间以及交换机和接收主机间的传输速率分别是 R1 和 R2，假设该交换机使用存储转发分组交换的方式，发送一个长度为 L 的分组的端到端的总时延是多少？（忽略排队、传播、处理时延）
  - 传输时延：L/R1 + L/R2
- 与分组交换相比，电路交换有哪些优点？在电路交换网络中，TDM 比 FDM 有哪些优点
  - 为端到端预留了带宽的资源，稳定
  - FDM 实现更复杂
- 假定用户共享一条 2mbps 链路，同时假定当每个用户传输时连续以 1mbps 传输，但每个用户仅传输 20% 的时间
  - a. 当使用电路交换时，能够支持多少个用户
    - R/R' = 2/1 = 2
  - b. 作为该题的后继问题，假定使用分组交换，为什么如果两个或更少的用户同时传输的话，在链路前面基本上没有排队时延？为什么如果 3 个用户同时传输的话，将有排队时延？
    - 在单位时间内可以传输两个用户的分组，不需要排队，3 个用户同时传输，超过了共享链接可用带宽，将会有排队延时
  - c. 求出某指定用户正在传输的概率
    - P=20% 0.2
  - d. 假定现有 3 个用户，求出在任何给定的时间，所有 3 个用户同时传输的概率，求出队列增长的时间比率
    - $P^3 = 0.2^3 = 0.008$
- 分组长度 L: 1000 bytes 距离 d: 2500 km 传播速率 s = $2.5*10^8m/s$ 传输速率 r = 2mbps，传输需要多久(指传播时延)，时延与传输速率相关吗？
  - d/s = $2.5*10^6/2.5*10^8$ = 10ms
  - 无关
- 假定主机A向主机B发送一个大文件，从主机A到主机B的路径上有 3 段链路，其速率分别为 R1=500kbps, R2=2mbps, R=1mbps
  - 假定该网络中没有其他流量，该文件传送的吞吐量是多少？
    - min{R1, R2, R} = 500kbps
  - 假定该文件是 4MB，传输该文件到主机B需要多久？
    - $4*10^6*8/500kbps$ = 64s 
  - 重复 a 和 b，只是这时R2减小到 100kbps
    - 4MBps/100kbps = 320s
- Internet 协议栈中的 5 的层次有哪些以及每层的主要任务
  - 应用层：应用的信息交互
  - 传输层：进程之间的通信，加强网络层的通信
  - 网络层: 端到端之间的通信，IP 的转发
  - 链路层：相邻节点间的通信
  - 物理层：将 bit 转换为物理信号/将物理信号转化为 bit
- 路由器处理 Internet 协议中的哪些层次？链路层交换机处理的是哪些层次？主机处理的是哪些层次
  - 网络层，链路层，物理层
  - 链路层，物理层
  - 所有层
- 式子（1-1）给出了经传输速率为 R 的 N 段链路发送长度为 L 的一个分组的端到端时延，对于经过 N 段链路一个接一个地发送 P 个这样的分组，一般化地表示出这个公式
  - 1-1 $d_{端到端} = N*(L/R)$
  - $N*(L/R) + (P-1)*(L/R) = (N+P-1)*(L/R)$
- 考虑一个应用程序以稳定的速率传输数据（例如，发送方每 k 个时间单元产生一个 N 比特的数据单元，其中 k 较小且固定），另外，当这个应用程序启动时，他将连续运行相当长一段时间
  - 是分组交换网还是电路交换网更为适合这种应用？为什么？
    - 电路交换网
    - 因为通信更加稳定，并且由于稳定速率且长时间运行，所以可以为其保留带宽
  - 假定使用了分组交换网，并且该网中的所有流量都来自如上所述的这种应用程序，此外，假定该应用程序数据传输速率的总和小于每条链路的各自容量，需要某种形式的拥塞控制吗？为什么？
    - 不需要，传输速率总和⼩于链路容量
- 有两台主机 A 和 B，由一条速率为 R bps 的链路相连，假定这两台主机相隔 m 米，沿该链路的传播速率为 s m/s，主机 A 向主机 B 发送长度 L bit 的分组
  - 用 m 和 s 表示传播时延 $d_{prop}$
    - m/s
  - 用 L 和 R 表示该分组的传播时间 $d_{trans}$
    - L/R
  - 忽略处理和排队时延，得出端到端时延的表达式
    - m/s + L/R
  - 假定主机 A 在时刻 t=0 开始传输该分组，$t=d_{trans}$ 时，该分组的最后一个 bit 在哪里
    - 刚刚离开 A
  - 假定 $d_{prop} > d_{trans}$，$t=d_{trans}$ 时，该分组的第一个 bit 在哪里
    - 未到达 B
  - 假定 $d_{prop} < d_{trans}$，$t=d_{trans}$ 时，该分组的第一个 bit 在哪里
    - 已经到达 B
  - 假定 $s=2.5*10^8$，L=120bit，R=56kbps，求出使 $d_{prop} = d_{trans}$ 时的距离 m
    - $L/R * s = 120bit/56kbps * (2.5*10^8) = (300*10^8)/56*10^3 = 5.36*10^5$
- 考虑路由器缓存中的排队时延，另 I 表示流量强度，即 I=La/R，假定排队时延的形式为 IL/R(1-I)，其中 I < 1
  - 写出总时延即排队时延加上传输时延的公式
    - IL/R(1-I) + L/R = (L/R)/(1-I)
  - 以 L/R 为函数画出总时延的图
    - 略
- 假定服务器与客户之间的每条链路的丢包概率为p，且这些链路的丢包率是独立的。一个（由服务器发送的）分组成功地被接收方收到的概率是多少？如果在从服务器到客户的路径上分组丢失了，则服务器将重传该分组。平均来说，为了使客户成功地接收该分组，服务器将要重传该分组多少次？
  - N 个链路
  - $P_s=(1-P)^N$
  - 第 1 次成功 $P_s$
  - 第 2 次成功 $(1-P_s) * P_s$
  - 第 i 次成功 $(1-P_s)^{i-1} * P_s$
  - $N = \sum_{i=1}^\infty{P_s}=1/P_s$
  - $N' = N-1=1/P_s-1$
- 假定两台主机A和B相隔20000km，由一条直接的 R=2Mbps 的链路相连。假定跨越该链路的传播速率是 $2.5×10^8m/s$
  - 计算带宽-时延积 $R*t_{prop}$
    - $R*t_{prop}=R*(d/s)=2*10^6bps*(2*10^7/2.5*10^8)=1.6*10^5bit$
  - 考虑从主机A到主机B发送一个800000bit的文件。假定该文件作为一个大的报文连续发送。在任何给定的时间，在链路上具有的比特数量最大值是多少？
    - $1.6*10^5bit$
  - 给出带宽-时延积的一种解释
    - 链路上的 bit 数量最大值
  - 在该链路上一个比特的宽度（以米计）是多少？
    - $2*10^7/1.6*10^5 = 125m$
  - 根据传播速率s、带宽R和链路m的长度，推导出一个比特宽度的一般表示式
    - $s*(1/R) = s/R$
- 在现代分组交换网中，源主机将长应用层报文（如一个图像或音乐文件）分段为较小的分组并向网络发送，接收方则将这些分组重新装配为初始报文，我们称这个过程为**报文分段**，假设有一长度为 $8*10^6$ bit 的报文，链路的传输速率均为 2Mbps，途中有两个分组交换机，忽略传播、排队和处理时延
  - 假设没有进行报文分段，源主机到第一台分组交换机移动报文需要多久？
    - $t = 8*10^6/2*10^6=4s$
  - 如果每台交换机均使用分组交换，从源主机移动报文到目的主机需要多久？
    - $t = 3*(8*10^6/2*10^6)=12s$
  - 假设报文被分段为 800 个分组，每个分组长度为 10000 bit，从源主机移动第一个分组到第一台交换机需要多久？从第一台交换机发送第一个分组到第二台交换机需要多久？从源主机发送第二个分组到第一台交换机需要多久？什么时候第二个分组能被第一台交换机全部收到？
    - $t = (1*10^4)/(2*10^6) = 5ms$
    - $t = (1*10^4)/(2*10^6) * 2 = 10ms$
  - 当进行报文分段时，从源主机向目的主机移动该文件需要多久？将该结果与第一问的答案进行比较并解释
    - $t = 15ms + (800-1)*5ms = 4.01s$
  - 除了减小时延之外，使用报文分段还有什么原因
    - 便于检测错误并重传，不分段的大包容易使路由器缓存不足导致丢包
  - 讨论报文分段的缺点
    - 分组需要排序，加上首部信息等